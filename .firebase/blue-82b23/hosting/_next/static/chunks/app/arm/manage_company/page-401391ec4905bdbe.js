(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6969],{72099:function(e,a,r){Promise.resolve().then(r.bind(r,70893))},19562:function(e,a,r){"use strict";r.d(a,{Z:function(){return d}});var t=r(57437),s=r(84809),l=r(66499),n=r(96016),o=r(85195),i=r(95996),c=r(29835);function d(e){let{detail:a,iconColor:r,title:d}=e;return(0,t.jsx)("div",{className:"md:w-input-max w-screen p-2",children:(0,t.jsx)(o.Z,{children:(0,t.jsxs)(i.Z,{children:[(0,t.jsx)(c.Z,{variant:"h6",component:"div",children:d}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(s.Z,{style:{color:r}}),(0,t.jsx)(c.Z,{sx:{fontSize:18},color:"text.secondary",gutterBottom:!0,children:a.name})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.Z,{style:{color:r}}),(0,t.jsx)(c.Z,{sx:{fontSize:18},color:"text.secondary",gutterBottom:!0,children:a.mobile})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.Z,{style:{color:r}}),(0,t.jsx)(c.Z,{sx:{fontSize:18},color:"text.secondary",gutterBottom:!0,children:a.address})]})]})})})}r(2265)},70893:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return K}});var t=r(57437),s=r(2265),l=r(47240),n=r(54272),o=r(43206);function i(e,a){return{name:e,calories:a}}i("2024/10/5",300),i("2024/11/6",5e3);var c=r(79708),d=r(26009),m=r(16492),h=r(76676),x=r(29835),u=r(79309),p=r(79221),j=r(67147),f=r(85195),y=r(95996),b=r(34099),v=r(25166),g=r(10356),Z=r(86383),_=r(89539),k=r.n(_),w=r(6285),C=r(77298),S=r(40512),D=r(41991),N=r(87957),E=r(82670),T=r(30828),A=r(81302),I=r(58121);function P(e){let{ID:a,openUpdateClose:r,openCopEdit:l}=e,n=(0,T.v9)(e=>e.root_data.DATAObj),o=(0,T.I0)(),i=D.Ry({name:D.Z_(),mobile:D.Z_().length(10),email:D.Z_(),address:D.Z_()}),{register:c,handleSubmit:d,setValue:h,setError:x,reset:u,watch:p,unregister:f,control:y,formState:{errors:b}}=(0,E.cI)({resolver:(0,N.X)(i)}),v=async e=>{try{await (0,I.r7)((0,I.JU)((0,I.ad)(),"coporate",a),e),await (0,I.r7)((0,I.JU)((0,I.ad)(),"data","coporate"),{coporate:{...n,[a]:{name:e.name}}}),u(),o((0,A.mX)({open:!0,type:"success",msg:"success"}))}catch(e){o((0,A.mX)({open:!0,type:"error",msg:e.message}))}};return s.useEffect(()=>{let e=async()=>{let e=(0,I.JU)((0,I.ad)(),"coporate",a),t=await (0,I.QT)(e);if(t.exists()){let e=t.data();h("name",e.name),h("mobile",e.mobile),h("email",e.email),h("address",e.address)}else r()};a&&l&&e()},[h,a,l]),(0,t.jsx)(s.Fragment,{children:(0,t.jsxs)(m.Z,{maxWidth:"md",open:l,onClose:()=>{r(),u()},children:[(0,t.jsx)(S.Z,{children:"Update Company"}),(0,t.jsx)(j.Z,{children:(0,t.jsxs)("form",{onSubmit:d(v),children:[(0,t.jsx)(E.Qr,{name:"name",control:y,render:e=>{let{field:a}=e;return(0,t.jsx)(C.Z,{sx:{my:1},...a,value:a.value||"",type:"text",label:"Name",fullWidth:!0,error:!!b.name,helperText:b.name&&b.name.message})}}),(0,t.jsx)(E.Qr,{name:"mobile",control:y,render:e=>{let{field:a}=e;return(0,t.jsx)(C.Z,{sx:{my:1},...a,value:a.value||"",label:"Mobile",type:"number",fullWidth:!0,error:!!b.mobile,helperText:b.mobile&&b.mobile.message})}}),(0,t.jsx)(E.Qr,{name:"email",control:y,render:e=>{let{field:a}=e;return(0,t.jsx)(C.Z,{sx:{my:1},...a,value:a.value||"",type:"email",label:"Email",fullWidth:!0,error:!!b.email,helperText:b.email&&b.email.message})}}),(0,t.jsx)(E.Qr,{name:"address",control:y,render:e=>{let{field:a}=e;return(0,t.jsx)(C.Z,{sx:{my:1},...a,value:a.value||"",type:"text",label:"Address",fullWidth:!0,error:!!b.address,helperText:b.address&&b.address.message})}}),(0,t.jsx)(w.Z,{sx:{my:1,width:"100%"},type:"submit",variant:"contained",children:"Add User"})]})})]})})}var M=r(19562);function W(e){let{packageData:a}=e,r=(0,s.useMemo)(()=>[{accessorKey:"package_id",header:"#Package ID",size:50},{accessorKey:"date",header:"Date",Cell:e=>{let{renderedCellValue:a,row:r}=e;return(0,t.jsx)(x.Z,{variant:"subtitle1",children:k()(a.toDate()).format("YYYY-MM-DD / hh:mm A")})}},{accessorKey:"cod",header:"Delivery Type",Cell:e=>{let{renderedCellValue:a,row:r}=e;return(0,t.jsx)(x.Z,{variant:"subtitle1",fontWeight:600,color:a?"red":"green",children:a?"COD":"Cash"})}},{accessorKey:"rate",header:"Rate",Cell:e=>{let{renderedCellValue:a,row:r}=e;return(0,t.jsxs)(x.Z,{children:["Rs.",a]})}},{accessorKey:"weight",header:"Weight",Cell:e=>{let{renderedCellValue:a,row:r}=e;return(0,t.jsxs)(x.Z,{children:[a,"Kg"]})}}],[]),n=(0,l.X0)({columns:r,data:a,enableExpandAll:!1,renderDetailPanel:e=>{let{row:a}=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)(x.Z,{variant:"h6",children:["Package ID: ",a.getValue("package_id")]}),(0,t.jsx)(M.Z,{detail:{name:"Lahiru Shiran",mobile:"0716320662",address:"B125/2, 5th Floor, 1st Road, Colombo"},iconColor:"gray",title:"Sender Details"})]})},muiExpandButtonProps:e=>{let{row:a,table:r}=e;return{onClick:()=>{r.setExpanded({[a.id]:!a.getIsExpanded()})}}}});return(0,t.jsx)("div",{children:(0,t.jsx)(l.P2,{table:n})})}var O=r(65606);function R(e){let{packageData:a}=e;console.log(a);let r={tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{top:"5%",left:"center"},color:["red","green"],series:[{name:"Access From",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!0,position:"center",formatter:"{d}%\nRs. {c}"},emphasis:{label:{show:!0,fontSize:40,fontWeight:"bold"}},data:[{value:a.filter(e=>"int"===e.delivery_type).reduce((e,a)=>e+a.rate,0),name:"International"},{value:a.filter(e=>"dom"===e.delivery_type).reduce((e,a)=>e+a.rate,0),name:"Domestic"}]}]};return(0,t.jsx)("div",{children:(0,t.jsx)(O.Z,{style:{width:"100%",height:"400px"},option:r})})}r(45009);let X=s.forwardRef(function(e,a){return(0,t.jsx)(p.Z,{direction:"up",ref:a,...e})});function U(e){let{handleClickOpen:a,handleClose:r,open:l,ID:n}=e,[i,c]=s.useState(k()(new Date)),[d,p]=s.useState(!0),[_,w]=s.useState(""),[C,S]=s.useState([]),D=(0,T.I0)();return s.useEffect(()=>{let e=async()=>{p(!0);try{let e=await (0,I.QT)((0,I.JU)((0,I.ad)(),"coporate",n,i.$y.toString(),(i.$M+1).toString()));e.exists()?(w(e.data()),console.log(e.data())):w("");let a=(0,I.IO)((0,I.hJ)((0,I.ad)(),"package"),(0,I.ar)("cop_id","==",n),(0,I.ar)("date",">=",i.startOf("month").toDate()),(0,I.ar)("date","<=",i.endOf("month").toDate())),r=await (0,I.PL)(a),t=[];r.docs.length>0?(r.forEach(e=>{t.push({...e.data(),package_id:e.id})}),S(t)):(S([]),D((0,A.mX)({open:!0,type:"error",msg:"no data"})))}catch(e){console.log(e),D((0,A.mX)({open:!0,type:"error",msg:e.message}))}};n&&i&&(e(),console.log(n))},[n,i,l]),(0,t.jsx)(s.Fragment,{children:(0,t.jsxs)(m.Z,{fullScreen:!0,open:l,onClose:()=>{r(),S([]),w("")},TransitionComponent:X,children:[(0,t.jsxs)(h.Z,{children:[(0,t.jsx)(o.Z,{edge:"start",color:"inherit",onClick:()=>{r(),S([]),w("")},"aria-label":"close",children:(0,t.jsx)(u.Z,{})}),(0,t.jsx)(g._,{dateAdapter:v.y,children:(0,t.jsx)(b.C,{components:["DatePicker"],children:(0,t.jsx)(Z.M,{label:"Select Date",views:["month","year"],value:i,onChange:e=>c(e)})})})]}),(0,t.jsxs)(j.Z,{children:[(0,t.jsxs)("div",{className:"flex md:flex-row flex-col",children:[(0,t.jsx)(f.Z,{className:"md:w-1/2 w-dialog-screen2",children:(0,t.jsxs)(y.Z,{children:[(0,t.jsxs)("div",{className:"flex gap-4 justify-between",children:[(0,t.jsx)(x.Z,{variant:"h6",color:"black",children:"Domestic"}),(0,t.jsx)(x.Z,{variant:"h6",color:"black",children:C.filter(e=>"dom"===e.delivery_type).length})]}),(0,t.jsxs)("div",{className:"flex gap-4 justify-between",children:[(0,t.jsx)(x.Z,{variant:"h6",color:"black",children:"International"}),(0,t.jsx)(x.Z,{variant:"h6",color:"black",children:C.filter(e=>"int"===e.delivery_type).length})]}),(0,t.jsxs)("div",{className:"flex gap-4 justify-between",children:[(0,t.jsx)(x.Z,{variant:"h6",color:"black",children:"Total Delivery"}),(0,t.jsx)(x.Z,{variant:"h6",color:"black",children:C.length})]}),(0,t.jsx)(R,{packageData:C}),(0,t.jsxs)("div",{className:"flex  justify-between gap-4",children:[(0,t.jsx)(x.Z,{variant:"h6",color:"black",children:"Total Manthly Payment"}),(0,t.jsx)(x.Z,{variant:"h6",color:"black",children:_.total_rate?_.total_rate:0})]}),(0,t.jsxs)("div",{className:"flex justify-between  gap-4",children:[(0,t.jsx)(x.Z,{variant:"h6",color:"black",children:"Total on Cash"}),(0,t.jsx)(x.Z,{variant:"h6",color:"black",children:_.on_cash_sale?_.on_cash_sale:0})]}),(0,t.jsxs)("div",{className:"flex justify-between  gap-4",children:[(0,t.jsx)(x.Z,{variant:"h6",color:"black",children:"Grand Total Revenue"}),(0,t.jsxs)(x.Z,{variant:"h6",color:"black",children:["Rs.",_.on_cash_sale?_.on_cash_sale:0+_.total_rate?_.total_rate:0]})]})]})}),(0,t.jsx)("div",{className:"md:mx-2 md:my-0 mx-0 my-2 w-dialog-screen2"})]}),(0,t.jsx)(W,{packageData:C})]})]})})}function Q(){let[e,a]=(0,s.useState)(!1),[r,i]=(0,s.useState)(!1),[m,h]=(0,s.useState)(""),[x,u]=(0,s.useState)(""),p=(0,T.v9)(e=>e.root_data.DATA),j=(0,T.v9)(e=>e.root_data.loading),f=()=>{i(!0)},y=()=>{a(!0)},b=(0,s.useMemo)(()=>[{accessorKey:"name",header:"Name",size:150}],[]),v=(0,l.X0)({columns:b,data:p||[],state:{showSkeletons:j},enableRowActions:!0,renderRowActions:e=>{let{row:a,table:r}=e;return(0,t.jsxs)(n.Z,{sx:{display:"flex",gap:"1rem"},children:[(0,t.jsx)(o.Z,{color:"error",onClick:()=>{y(),u(a.original.cop_id)},children:(0,t.jsx)(c.Z,{})}),(0,t.jsx)(o.Z,{onClick:()=>{h(a.original.cop_id),f()},children:(0,t.jsx)(d.Z,{})})]})}});return(0,t.jsxs)("div",{children:[(0,t.jsx)(U,{handleClickOpen:y,handleClose:()=>{a(!1)},open:e,ID:x}),(0,t.jsx)(P,{ID:m,openCopEdit:r,openUpdateClose:()=>{i(!1)}}),(0,t.jsx)(l.P2,{table:v})]})}r(92730);var F=r(99528);function J(){let[e,a]=s.useState(!1),r=(0,T.v9)(e=>e.root_data.DATAObj);(0,T.v9)(e=>e.root_data.loading);let l=()=>{a(!1)},n=(0,T.I0)(),i=D.Ry({name:D.Z_().required("Enter Company Name").transform(e=>e.toLowerCase()),mobile:D.Z_().required("Enter Mobile Number").length(10),email:D.Z_(),address:D.Z_().required("Enter address ")}),{register:c,handleSubmit:d,setValue:h,setError:x,reset:u,watch:p,unregister:f,control:y,formState:{errors:b}}=(0,E.cI)({resolver:(0,N.X)(i)}),v=async e=>{try{let a=(0,I.IO)((0,I.hJ)((0,I.ad)(),"coporate"),(0,I.ar)("name","==",e.name));if((await (0,I.PL)(a)).empty){let a=await (0,I.ET)((0,I.hJ)((0,I.ad)(),"coporate"),e),t={name:e.name,cop_id:a.id};await (0,I.r7)((0,I.JU)((0,I.ad)(),"data","coporate"),{coporate:{...r,[a.id]:t}}),u(),n((0,A.mX)({open:!0,type:"success",msg:"success"}))}else n((0,A.mX)({open:!0,type:"error",msg:"Given Company Name Already Exist"}))}catch(e){n((0,A.mX)({open:!0,type:"error",msg:e.message}))}};return(0,t.jsxs)(s.Fragment,{children:[(0,t.jsx)(w.Z,{sx:{m:1},variant:"contained",onClick:()=>{a(!0)},children:"Register Coporate"}),(0,t.jsxs)(m.Z,{maxWidth:"md",open:e,onClose:l,children:[(0,t.jsxs)(S.Z,{children:[(0,t.jsx)(o.Z,{onClick:l,children:(0,t.jsx)(F.Z,{color:"error"})}),"Coporate Register Form"]}),(0,t.jsx)(j.Z,{children:(0,t.jsxs)("form",{onSubmit:d(v),children:[(0,t.jsx)(E.Qr,{name:"name",control:y,render:e=>{let{field:a}=e;return(0,t.jsx)(C.Z,{sx:{my:1},...a,value:a.value||"",type:"text",label:"Name",fullWidth:!0,error:!!b.name,helperText:b.name&&b.name.message})}}),(0,t.jsx)(E.Qr,{name:"mobile",control:y,render:e=>{let{field:a}=e;return(0,t.jsx)(C.Z,{sx:{my:1},...a,value:a.value||"",label:"Mobile",type:"number",fullWidth:!0,error:!!b.mobile,helperText:b.mobile&&b.mobile.message})}}),(0,t.jsx)(E.Qr,{name:"email",control:y,render:e=>{let{field:a}=e;return(0,t.jsx)(C.Z,{sx:{my:1},...a,value:a.value||"",type:"email",label:"Email",fullWidth:!0,error:!!b.email,helperText:b.email&&b.email.message})}}),(0,t.jsx)(E.Qr,{name:"address",control:y,render:e=>{let{field:a}=e;return(0,t.jsx)(C.Z,{sx:{my:1},...a,value:a.value||"",type:"text",label:"Address",fullWidth:!0,error:!!b.address,helperText:b.address&&b.address.message})}}),(0,t.jsx)(w.Z,{sx:{my:1,width:"100%"},type:"submit",variant:"contained",children:"Add User"})]})})]})]})}function K(){return(0,t.jsxs)("div",{children:[(0,t.jsx)(J,{}),(0,t.jsx)(Q,{})]})}},45009:function(e,a,r){"use strict";r.d(a,{I8:function(){return i}});var t=r(26142),s=r(92730),l=r(58121),n=r(24905);let o=(0,t.C6)().length?(0,t.Mq)():(0,t.ZF)({apiKey:"AIzaSyB_FHVhK2MykSnDA0rU6-eeCmzm7VtWJnU",authDomain:"blue-82b23.firebaseapp.com",projectId:"blue-82b23",storageBucket:"blue-82b23.appspot.com",messagingSenderId:"308155436293",appId:"1:308155436293:web:72a0d43e8cd7e9cb8d3b6c"}),i=(0,s.v0)(o);(0,l.ad)(o),(0,n.cF)(o)},81302:function(e,a,r){"use strict";r.d(a,{At:function(){return l},mX:function(){return s}});let t=(0,r(35972).oM)({name:"snack_bar",initialState:{OPEN:!1,TYPE:"sucess",MSG:""},reducers:{openScackbar:(e,a)=>{let{open:r,type:t,msg:s}=a.payload;e.OPEN=r,e.TYPE=t,e.MSG=s},closeScackbar:e=>{e.OPEN=!1}}}),{openScackbar:s,closeScackbar:l}=t.actions;a.ZP=t.reducer}},function(e){e.O(0,[4358,124,8712,1472,5698,4583,7397,9271,1024,2940,6859,412,5883,3584,9677,3021,2971,8069,1744],function(){return e(e.s=72099)}),_N_E=e.O()}]);