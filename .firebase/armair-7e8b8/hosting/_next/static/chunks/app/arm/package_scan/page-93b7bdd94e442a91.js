(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1685],{60982:function(e,r,s){Promise.resolve().then(s.bind(s,90587))},19562:function(e,r,s){"use strict";s.d(r,{Z:function(){return d}});var t=s(57437),a=s(84809),i=s(66499),c=s(96016),n=s(85195),l=s(95996),o=s(29835);function d(e){let{detail:r,iconColor:s,title:d}=e;return(0,t.jsx)("div",{className:"md:w-input-max w-screen p-2",children:(0,t.jsx)(n.Z,{children:(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(o.Z,{variant:"h6",component:"div",children:d}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(a.Z,{style:{color:s}}),(0,t.jsx)(o.Z,{sx:{fontSize:18},color:"text.secondary",gutterBottom:!0,children:r.name})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.Z,{style:{color:s}}),(0,t.jsx)(o.Z,{sx:{fontSize:18},color:"text.secondary",gutterBottom:!0,children:r.mobile})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.Z,{style:{color:s}}),(0,t.jsx)(o.Z,{sx:{fontSize:18},color:"text.secondary",gutterBottom:!0,children:r.address})]})]})})})}s(2265)},99354:function(e,r,s){"use strict";s.d(r,{Z:function(){return w}});var t=s(57437),a=s(2265),i=s(6285),c=s(16492),n=s(43206),l=s(79309),o=s(79221),d=s(40512),x=s(67147),h=s(77298),j=s(14359);let m="html5qr-code-full-region",u=e=>{let r={};return e.fps&&(r.fps=e.fps),e.qrbox&&(r.qrbox=e.qrbox),e.aspectRatio&&(r.aspectRatio=e.aspectRatio),void 0!==e.disableFlip&&(r.disableFlip=e.disableFlip),r};var p=e=>((0,a.useEffect)(()=>{let r=u(e),s=!0===e.verbose;if(!e.qrCodeSuccessCallback)throw"qrCodeSuccessCallback is required callback.";let t=new j.wF(m,r,s);return t.render(e.qrCodeSuccessCallback,e.qrCodeErrorCallback),()=>{t.clear().catch(e=>{console.error("Failed to clear html5QrcodeScanner. ",e)})}},[]),(0,t.jsx)("div",{id:m})),g=s(68148),f=s(10571),v=s(87640),y=s(41848),Z=s(952),b=s(61975);let k=a.forwardRef(function(e,r){return(0,t.jsx)(o.Z,{direction:"up",ref:r,...e})});function w(e){let{getPackageID:r}=e,[s,o]=a.useState(!1),[j,m]=a.useState("camera"),[u,w]=a.useState(""),C=()=>{o(!1)},_={color:"primary",sx:N,icon:(0,t.jsx)(b.Ijt,{size:30}),label:"Add"};return(0,t.jsxs)(a.Fragment,{children:[(0,t.jsxs)(i.Z,{variant:"contained","aria-label":_.label,color:"primary",onClick:()=>{o(!0)},children:["Open Scan ",(0,t.jsx)(b.Ijt,{sx:{m:1},size:30})]}),(0,t.jsxs)(c.Z,{open:s,onClose:C,TransitionComponent:k,children:[(0,t.jsx)(d.Z,{children:(0,t.jsx)(n.Z,{edge:"start",color:"inherit",onClick:C,"aria-label":"close",children:(0,t.jsx)(l.Z,{})})}),(0,t.jsxs)(x.Z,{children:[(0,t.jsx)("div",{children:(0,t.jsxs)(y.Z,{children:[(0,t.jsx)(Z.Z,{id:"demo-controlled-radio-buttons-group",children:"Scan Option"}),(0,t.jsxs)(f.Z,{row:!0,"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",value:j,onChange:e=>{m(e.target.value)},children:[(0,t.jsx)(v.Z,{value:"camera",control:(0,t.jsx)(g.Z,{}),label:"Camera"}),(0,t.jsx)(v.Z,{value:"search",control:(0,t.jsx)(g.Z,{}),label:"Manual Input"})]})]})}),"camera"===j?(0,t.jsx)(p,{fps:10,qrbox:250,disableFlip:!1,qrCodeSuccessCallback:(e,s)=>{r(e),o(!1)}}):(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(h.Z,{onChange:e=>w(e.target.value),size:"small",label:"Package Number"}),(0,t.jsx)(i.Z,{sx:{mx:1},variant:"contained",onClick:()=>{u&&(r(u),o(!1))},children:"Add Package Id"})]})]})]})]})}let N={position:"absolute",bottom:16,right:16}},90587:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return B}});var t=s(57437),a=s(2265),i=s(99354),c=s(40139),n=s(10470),l=s(29835),o=s(6285),d=s(19562),x=s(86520),h=s(20360),j=s(4558),m=s(64845),u=s(30412),p=s(98430),g=s(16978),f=s(59968);function v(e,r){return{name:e,price:r}}function y(e){let{packageDetail:r}=e;return(0,t.jsx)(m.Z,{component:n.Z,children:(0,t.jsxs)(x.Z,{sx:{minWidth:500},size:"medium","aria-label":"a dense table",children:[(0,t.jsx)(u.Z,{children:(0,t.jsxs)(p.Z,{sx:{backgroundColor:"black"},children:[(0,t.jsx)(j.Z,{sx:{color:"white"},children:"Description"}),(0,t.jsx)(j.Z,{sx:{color:"white"},align:"right",children:"Price"}),(0,t.jsx)(j.Z,{sx:{color:"white"},width:"10%",align:"left",children:"Progress"})]})}),(0,t.jsxs)(h.Z,{children:[(0,t.jsxs)(p.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,t.jsx)(j.Z,{component:"th",scope:"row",children:"Delivery Fees"}),(0,t.jsxs)(j.Z,{align:"right",children:["Rs.",r.rate]}),(0,t.jsx)(j.Z,{align:"right",children:!0===r.rate_cod?(0,t.jsx)(g.Z,{color:"error"}):!1===r.rate_cod?(0,t.jsx)(f.Z,{color:"success"}):"error"})]}),(0,t.jsxs)(p.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,t.jsx)(j.Z,{component:"th",scope:"row",children:"Package Price COD"}),(0,t.jsxs)(j.Z,{align:"right",children:["Rs.",r.package_price]}),(0,t.jsx)(j.Z,{align:"right",children:r.package_price>0?(0,t.jsx)(g.Z,{color:"error"}):0===r.package_price?(0,t.jsx)(f.Z,{color:"success"}):"error"})]}),(0,t.jsxs)(p.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,t.jsx)(j.Z,{component:"th",scope:"row",children:"Grand Total"}),(0,t.jsxs)(j.Z,{align:"right",children:["Rs.",r.package_price+r.rate]})]}),(0,t.jsxs)(p.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,t.jsx)(j.Z,{component:"th",scope:"row",children:"Blance"}),(0,t.jsxs)(j.Z,{align:"right",children:["Rs.",r.package_price+(r.rate_cod?r.rate:0)]})]})]})]})})}v("Delivery Fees",159),v("Package Price",237),v("Total Blance",262);var Z=s(85195),b=s(95996),k=s(58129),w=s(57252);function N(e){let{detail:r,iconColor:s,title:a,index:i}=e;return(0,t.jsxs)("div",{className:"p-2",children:[(0,t.jsxs)(Z.Z,{className:"flex",variant:"elevation",elevation:0,children:[(0,t.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,t.jsx)("div",{className:"bg-green-600 p-2 rounded-full w-8 h-8 flex items-center justify-center text-white",children:(0,t.jsx)(l.Z,{children:i+1})}),(0,t.jsx)("div",{className:"border-l-4 border-green-600  h-32"})]}),(0,t.jsxs)(b.Z,{children:[(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(l.Z,{variant:"h6",component:"div",children:r.name})}),(0,t.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,t.jsx)(l.Z,{sx:{fontSize:18},gutterBottom:!0,children:"Ariea"}),(0,t.jsx)(l.Z,{sx:{fontSize:18},color:"text.secondary",gutterBottom:!0,children:r.ariea})]}),(0,t.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,t.jsx)(l.Z,{sx:{fontSize:18},gutterBottom:!0,children:"Pickup"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Z,{sx:{fontSize:18},color:"text.secondary",gutterBottom:!0,children:r.pickup}),(0,t.jsx)(w.HwV,{style:{color:s}})]})]})]})]}),(0,t.jsx)(k.Z,{})]})}var C=s(60102),_=s(44209),S=s(48012);function D(e){let{packageDetail:r}=e;return(0,t.jsx)("div",{children:(0,t.jsx)(n.Z,{className:"flex justify-between items-end p-2 my-2",children:(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(l.Z,{variant:"body1",color:"GrayText",fontWeight:600,children:"Tracking ID"}),(0,t.jsx)(l.Z,{variant:"body1",children:r.tracking_id})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(l.Z,{variant:"body1",color:"GrayText",fontWeight:600,children:"Zip Code"}),(0,t.jsx)(l.Z,{variant:"body1",children:r.reciver.zip_code})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(l.Z,{variant:"body1",color:"GrayText",fontWeight:600,children:"Country"}),(0,t.jsx)(l.Z,{variant:"body1",children:r.reciver.country})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(l.Z,{variant:"body1",color:"GrayText",fontWeight:600,children:"City"}),(0,t.jsx)(l.Z,{variant:"body1",children:r.reciver.city})]})]})})})}var P=s(89539),z=s.n(P),E=s(30828),T=s(58121),R=s(81302);function A(e){var r;let{packageDetail:s}=e,[i,c]=(0,a.useState)(!1),[x,h]=(0,a.useState)(!1),j=(0,E.v9)(e=>e.root_data.DATA),m=(0,E.v9)(e=>e.root_data.USERDATA),u=(0,E.I0)(),p=async()=>{try{let e=(0,T.JU)((0,T.ad)(),"package",s.package_id);await (0,T.r7)(e,{tracking:{...s.tracking,[m.id]:{name:m.name,area:m.area,date:(0,T.Bt)(),job_role:"rider"===m.job_role?"Rider":"branch"===m.job_role?"Branch":"admin"===m.job_role?"Manager":""}}}),c(!0),u((0,R.mX)({open:!0,type:"success",msg:"Marked As package Picked up"}))}catch(e){u((0,R.mX)({open:!0,type:"error",msg:e.message}))}},g=async()=>{try{let e=(0,T.JU)((0,T.ad)(),"package",s.package_id);await (0,T.r7)(e,{state:"delivered"}),h(!0),u((0,R.mX)({open:!0,type:"success",msg:"Delivery Completed"}))}catch(e){u((0,R.mX)({open:!0,type:"error",msg:e.message}))}};return(0,t.jsxs)("div",{className:"flex md:flex-row flex-col flex-wrap",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row lg:flex-col",children:[(0,t.jsx)(d.Z,{detail:s.sender,iconColor:"gray",title:"Sender Details"}),(0,t.jsx)(d.Z,{detail:s.reciver,iconColor:"green",title:"Revicer Details"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(n.Z,{className:"flex justify-between items-end p-2 my-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Z,{variant:"body1",fontWeight:600,pl:1,children:z()(s.date.toDate()).format("YYYY-MM-DD / hh:mm A")}),(0,t.jsx)(l.Z,{textTransform:"capitalize",variant:"body1",fontWeight:600,pl:1,children:s.cop_id?j.filter(e=>e.cop_id===s.cop_id).map(e=>e.name)[0]:"Individual"}),(0,t.jsxs)("div",{className:"flex",children:["dom"===s.delivery_type?(0,t.jsx)(_.ARu,{color:"gray",size:30}):"int"===s.delivery_type?(0,t.jsx)(S.Y5b,{color:"gray",size:30}):"system Error contact branch",(0,t.jsx)(l.Z,{fontWeight:600,color:"gray",variant:"h5",children:"dom"===s.delivery_type?"Domestic":"int"===s.delivery_type?"International":"system Error contact branch"})]}),(0,t.jsxs)("div",{className:"flex justify-center items-center",children:[(0,t.jsx)(l.Z,{variant:"body1",color:"GrayText",fontWeight:600,children:"Delivery"}),(0,t.jsxs)(l.Z,{sx:{mx:1},fontWeight:600,color:"red",variant:"h6",children:[" ",!0===s.cod?"COD":!1===s.cod?"Cash":"system Error contact branch"]})]})]}),(0,t.jsxs)(l.Z,{fontWeight:600,color:"pending"===s.state?"orange":"delivered"===s.state?"green":"red",variant:"h5",children:[(0,t.jsx)(C.u5D,{scale:100})," ","pending"===s.state?"Pending":"delivered"===s.state?"Delivered":"system Error contact branch"]})]}),"int"===s.delivery_type&&(0,t.jsx)(D,{packageDetail:s})]}),(0,t.jsx)(y,{packageDetail:s}),(0,t.jsxs)("div",{className:"flex justify-between my-2",children:[i?(0,t.jsx)(t.Fragment,{}):(0,t.jsxs)(o.Z,{disabled:"pending"!==s.state||(null===(r=s.tracking)||void 0===r?void 0:r.hasOwnProperty(m.id))!==!1,onClick:p,variant:"contained",color:"warning",children:[console.log(),"Pick up"]}),x?(0,t.jsx)(t.Fragment,{}):(0,t.jsx)(o.Z,{onClick:g,variant:"contained",color:"success",children:"Delivery Complete"})]})]}),(0,t.jsx)("div",{children:Object.keys(s.tracking?s.tracking:{}).map(e=>s.tracking[e]).map((e,r)=>(0,t.jsx)("div",{children:(0,t.jsx)(N,{index:r,detail:{name:e.name,area:e.area,pickup:z()(e.date.toDate()).format("YYYY-MM-DD / hh:mm A")},iconColor:"green"})},"".concat(e.name).concat(e.ariea)))})]})}var W=s(25211),q=s(70997);function B(){let[e,r]=a.useState(""),[s,n]=a.useState(!1),[o,d]=a.useState(null),x=(0,E.I0)(),h=(0,a.useRef)(null);return(0,c.C)((e,s)=>{r(e)},{target:h}),(0,a.useEffect)(()=>{let r=async()=>{try{n(!0);let r=(0,T.JU)((0,T.ad)(),"package",e),s=await (0,T.QT)(r);s.exists()?(d({...s.data(),package_id:s.id}),n(!1),x((0,R.mX)({open:!0,type:"success",msg:"success"}))):(d(null),n(!1),x((0,R.mX)({open:!0,type:"error",msg:"Package not found"})))}catch(e){n(!1),x((0,R.mX)({open:!0,type:"error",msg:e.message}))}};e&&r()},[e]),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Z,{getPackageID:e=>{r(e)}}),(0,t.jsx)("div",{ref:h}),s?(0,t.jsx)("div",{className:"flex min-h-screen justify-center items-center",children:(0,t.jsx)(W.Z,{})}):o?(0,t.jsx)(A,{packageDetail:o}):(0,t.jsx)("div",{className:"flex min-h-screen justify-center items-center",children:(0,t.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,t.jsx)(l.Z,{variant:"h6",color:"GrayText",fontWeight:600,children:"No Item Data"}),(0,t.jsx)(q.mVK,{size:100,color:"gray"})]})})]})}},81302:function(e,r,s){"use strict";s.d(r,{At:function(){return i},mX:function(){return a}});let t=(0,s(35972).oM)({name:"snack_bar",initialState:{OPEN:!1,TYPE:"sucess",MSG:""},reducers:{openScackbar:(e,r)=>{let{open:s,type:t,msg:a}=r.payload;e.OPEN=s,e.TYPE=t,e.MSG=a},closeScackbar:e=>{e.OPEN=!1}}}),{openScackbar:a,closeScackbar:i}=t.actions;r.ZP=t.reducer}},function(e){e.O(0,[4358,1779,52,5505,1821,6950,522,6305,1472,5698,4583,7397,9271,2940,472,412,8253,2971,8069,1744],function(){return e(e.s=60982)}),_N_E=e.O()}]);